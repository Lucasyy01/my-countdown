<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„è‡ªç”±å€’è®¡æ—¶</title>
    <!-- å¼•å…¥Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥Interå­—ä½“ --><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            
            /* âœ¨ æ–°çš„CSSåŠ¨æ€æ¸å˜èƒŒæ™¯ */
            background: linear-gradient(-45deg, #0b1c3d, #1d2b5a, #5a3c6a, #c06c84, #f8b195);
            background-size: 400% 400%;
            animation: gradientAnimation 25s ease infinite;
        }

        /* âœ¨ åŠ¨æ€èƒŒæ™¯çš„åŠ¨ç”» */
        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* å€’è®¡æ—¶åŠ è½½åŠ¨ç”» */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #fff; /* é€‚åº”æ·±è‰²èƒŒæ™¯ */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* ç¡®ä¿åœ¨åŠ è½½æ—¶ï¼Œå€’è®¡æ—¶æ•°å­—ä¸å¯è§ï¼Œé¿å…é—ªçƒ */
        .countdown-container.loading .countdown-item {
            visibility: hidden;
        }
        /* è°ƒæ•´è¾“å…¥æ¡†æ—¥æœŸæ–‡å­—é¢œè‰² */
        input[type="date"] {
            color-scheme: dark; /* å°è¯•è®©æ—¥æœŸé€‰æ‹©å™¨é€‚åº”æ·±è‰²ä¸»é¢˜ */
        }
        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(1); /* åè½¬æ—¥å†å›¾æ ‡é¢œè‰² */
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <!-- è§†é¢‘èƒŒæ™¯å·²è¢«åˆ é™¤ -->

    <div class="w-full max-w-3xl mx-auto bg-slate-900 bg-opacity-40 backdrop-blur-lg rounded-xl shadow-2xl p-6 md:p-10 text-center text-white relative z-10">
        
        <header class="mb-6">
            <h1 class="text-4xl md:text-5xl font-extrabold text-white drop-shadow-lg">
                æˆ‘çš„è‡ªç”±å€’è®¡æ—¶
            </h1>
            <p id="sub-title" class="text-lg text-gray-200 mt-2"></p>
        </header>

        <!-- æ—¥æœŸè®¾ç½®åŒºåŸŸ --><div class="flex flex-col sm:flex-row items-center justify-center gap-2 mb-8">
            <input 
                type="date" 
                id="target-date-input" 
                class="block w-full sm:w-auto px-4 py-3 text-base text-white bg-white bg-opacity-10 border border-white border-opacity-20 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-white placeholder-gray-300"
                aria-label="è®¾ç½®ç›®æ ‡æ—¥æœŸ"
            >
            <button 
                id="set-date-button"
                class="w-full sm:w-auto px-6 py-3 bg-white bg-opacity-20 text-white font-semibold rounded-lg shadow-md hover:bg-white hover:bg-opacity-30 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-75 transition-colors duration-200"
            >
                è®¾ç½®ç›®æ ‡
            </button>
        </div>

        <!-- âœ¨ æ–°å¢çš„é”™è¯¯æç¤ºåŒºåŸŸ --><div id="error-message" class="hidden text-red-300 text-sm mb-4"></div>

        <!-- å€’è®¡æ—¶æ˜¾ç¤ºåŒºåŸŸ --><div id="countdown-container" class="countdown-container loading">
            <!-- åŠ è½½æŒ‡ç¤ºå™¨ --><div id="loader" class="loader mx-auto my-10" style="border-top-color: #fff;"></div>
            
            <!-- å€’è®¡æ—¶æ•°å­— --><div class="flex justify-center text-center space-x-2 sm:space-x-4 countdown-item">
                <div class="bg-white bg-opacity-10 backdrop-blur-sm p-3 sm:p-6 rounded-lg shadow-lg w-1/4">
                    <div id="days" class="text-3xl sm:text-6xl font-bold text-white">0</div>
                    <div class="text-xs sm:text-sm text-gray-200 uppercase mt-1">å¤©</div>
                </div>
                <div class="bg-white bg-opacity-10 backdrop-blur-sm p-3 sm:p-6 rounded-lg shadow-lg w-1/4">
                    <div id="hours" class="text-3xl sm:text-6xl font-bold text-white">0</div>
                    <div class="text-xs sm:text-sm text-gray-200 uppercase mt-1">å°æ—¶</div>
                </div>
                <div class="bg-white bg-opacity-10 backdrop-blur-sm p-3 sm:p-6 rounded-lg shadow-lg w-1/4">
                    <div id="minutes" class="text-3xl sm:text-6xl font-bold text-white">0</div>
                    <div class="text-xs sm:text-sm text-gray-200 uppercase mt-1">åˆ†é’Ÿ</div>
                </div>
                <div class="bg-white bg-opacity-10 backdrop-blur-sm p-3 sm:p-6 rounded-lg shadow-lg w-1/4">
                    <div id="seconds" class="text-3xl sm:text-6xl font-bold text-white">0</div>
                    <div class="text-xs sm:text-sm text-gray-200 uppercase mt-1">ç§’</div>
                </div>
            </div>
            
            <!-- ç›®æ ‡è¾¾æˆæç¤º --><div id="message" class="hidden mt-6 text-2xl font-bold text-green-300">
                ğŸ‰ ç›®æ ‡è¾¾æˆï¼æ¬¢è¿æ¥åˆ°æ–°ç”Ÿæ´»ï¼
            </div>
        </div>

        <!-- âœ¨ ä¿®æ”¹åçš„é‡‘å¥å±•ç¤ºåŒºåŸŸ --><div id="daily-quote-container" class="hidden mt-12 cursor-pointer" title="ç‚¹å‡»åˆ·æ–°é‡‘å¥">
            <!-- é‡æ–°è®¾è®¡äº†å¡ç‰‡æ ·å¼ --><div class="p-5 text-center transition-transform transform hover:scale-105">
                <h4 class="text-sm font-semibold text-gray-300 tracking-widest uppercase mb-3">âœ¨ ç‚¹å‡»åˆ·æ–°é‡‘å¥ âœ¨</h4>
                <p id="daily-quote-content" class="text-2xl md:text-3xl text-white font-medium leading-relaxed italic shadow-md">
                    <!-- é‡‘å¥å°†åœ¨è¿™é‡Œæ˜¾ç¤º --></p>
            </div>
        </div>


        <!-- å½“å‰ç›®æ ‡æ—¥æœŸæç¤º --><footer class="mt-8">
            <p id="target-date-display" class="text-gray-300 text-sm">
                å°šæœªè®¾ç½®ç›®æ ‡æ—¥æœŸ
            </p>
        </footer>

    </div>

    <!-- âœ¨ Modalå·²è¢«åˆ é™¤ --><script>
        // --- å€’è®¡æ—¶å…ƒç´  ---
        const targetDateInput = document.getElementById('target-date-input');
        const setDateButton = document.getElementById('set-date-button');
        const countdownContainer = document.getElementById('countdown-container');
        const loader = document.getElementById('loader');
        
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        
        const messageEl = document.getElementById('message');
        const targetDateDisplay = document.getElementById('target-date-display');
        const subTitleEl = document.getElementById('sub-title');
        const errorMessageEl = document.getElementById('error-message');

        // --- âœ¨ é‡‘å¥ç›¸å…³å…ƒç´  ---
        const dailyQuoteContainer = document.getElementById('daily-quote-container');
        const dailyQuoteContent = document.getElementById('daily-quote-content');

        const STORAGE_KEY = 'myFreedomCountdownTarget';
        let targetDate = null;
        let countdownInterval = null;
        let currentQuoteIndex = -1; // âœ¨ ç”¨äºé˜²æ­¢é‡å¤æ˜¾ç¤ºé‡‘å¥

        // --- âœ¨ æ‘©æ ¹Â·åå¡å°”é‡‘å¥åº“ ---
        const morganHouselQuotes = [
            "é‡‘é’±æœ€å¤§çš„ä»·å€¼ï¼Œæ˜¯å®ƒèƒ½ç»™ä½ æŒæ§è‡ªå·±æ—¶é—´çš„èƒ½åŠ›ã€‚",
            "å­˜é’±çš„æ„ä¹‰ä¸åœ¨äºä½ éè¦ä¹°ä»€ä¹ˆï¼Œè€Œåœ¨äºå®ƒèƒ½å¸¦ç»™ä½ çš„é€‰é¡¹ã€ç‹¬ç«‹å’Œè‡ªç”±ã€‚",
            "çœŸæ­£çš„è´¢å¯Œï¼Œæ˜¯é‚£äº›çœ‹ä¸è§çš„ä¸œè¥¿ï¼šæ˜¯èƒ½å’Œä½ çˆ±çš„äººå…±åº¦æ—¶å…‰ï¼Œæ˜¯èƒ½æŒæ§è‡ªå·±çš„ç”Ÿæ´»ã€‚",
            "è‡´å¯Œå’Œå®ˆå¯Œæ˜¯ä¸¤ç äº‹ã€‚è‡´å¯Œéœ€è¦å†’é™©å’Œä¹è§‚ï¼Œè€Œå®ˆå¯Œéœ€è¦è°¦é€Šå’Œææƒ§ã€‚",
            "â€˜å¤Ÿäº†â€™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¦‚å¿µã€‚â€˜å¤Ÿäº†â€™æ„å‘³ç€ä½ åœæ­¢ç§»åŠ¨é‚£ä¸ªè´ªå©ªçš„ç»ˆç‚¹çº¿ã€‚",
            "ä½ çš„â€˜å®‰å…¨è¾¹é™…â€™è¶Šå¤§ï¼Œä½ å°±è¶Šèƒ½å¿å—æ³¢åŠ¨ï¼Œä»è€Œè®©å¤åˆ©è¿™ä¸ªå¥‡è¿¹æœ‰æ—¶é—´ä¸ºä½ å·¥ä½œã€‚",
            "ä¸è¦ä¸ºé‚£äº›ä½ ä¸éœ€è¦çš„ä¸œè¥¿ï¼Œå»èµŒä¸Šé‚£äº›ä½ æ‹¥æœ‰ä¸”éœ€è¦çš„ä¸œè¥¿ã€‚",
            "ä¸–ç•Œä¸Šæ²¡æœ‰ä»€ä¹ˆæ˜¯å…è´¹çš„ã€‚æˆåŠŸçš„ä»£ä»·æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œä½†ä¸ç¡®å®šæ€§ã€æ€€ç–‘å’Œé—æ†¾çš„ä»£ä»·åŒæ ·çœŸå®ã€‚",
            "ç”¨é‡‘é’±å»è·å–å¯¹æ—¶é—´å’Œç”Ÿæ´»çš„æŒæ§æ„Ÿï¼Œæ˜¯é‡‘é’±èƒ½å¸¦æ¥çš„æœ€é«˜çº¢åˆ©ã€‚",
            "é‡è¦çš„ä¸æ˜¯ä½ èµšäº†å¤šå°‘ï¼Œè€Œæ˜¯ä½ å­˜ä¸‹äº†å¤šå°‘ã€‚å‚¨è“„ç‡æ˜¯ä½ èƒ½å®Œå…¨æŒæ§çš„ã€‚"
        ];

        // --- å€’è®¡æ—¶é€»è¾‘ (åŸæœ‰) ---

        function updateCountdown() {
            if (!targetDate) return;

            const now = new Date().getTime();
            const distance = targetDate.getTime() - now;

            if (distance < 0) {
                // å€’è®¡æ—¶ç»“æŸ
                clearInterval(countdownInterval);
                countdownContainer.style.display = 'none'; // éšè—æ•°å­—
                loader.style.display = 'none'; // éšè—åŠ è½½å™¨
                messageEl.classList.remove('hidden'); // æ˜¾ç¤ºå®Œæˆä¿¡æ¯
                subTitleEl.textContent = 'æ¬¢è¿å¼€å¯æ–°ç”Ÿæ´»ï¼';
                dailyQuoteContainer.classList.add('hidden'); // âœ¨ ç»“æŸåéšè—é‡‘å¥
                return;
            }

            // è®¡ç®—æ—¶é—´
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            // æ›´æ–°DOM
            daysEl.textContent = days;
            hoursEl.textContent = hours;
            minutesEl.textContent = minutes;
            secondsEl.textContent = seconds;
            
            // éšè—åŠ è½½å™¨ï¼Œæ˜¾ç¤ºå€’è®¡æ—¶
            if (countdownContainer.classList.contains('loading')) {
                loader.style.display = 'none';
                countdownContainer.classList.remove('loading');
                // è®©æ•°å­—å‡ºç°æ›´å¹³æ»‘
                document.querySelectorAll('.countdown-item').forEach(el => {
                    el.style.visibility = 'visible';
                });
            }
        }

        /**
         * âœ¨ ä¿®æ”¹ï¼šè®¾ç½®å¹¶ä¿å­˜æ–°çš„ç›®æ ‡æ—¥æœŸ
         */
        function setAndSaveDate() {
            const dateString = targetDateInput.value;
            errorMessageEl.classList.add('hidden'); // âœ¨ å…ˆéšè—æ—§é”™è¯¯

            if (!dateString) {
                errorMessageEl.textContent = 'è¯·é€‰æ‹©ä¸€ä¸ªæœ‰æ•ˆçš„æ—¥æœŸï¼';
                errorMessageEl.classList.remove('hidden');
                return;
            }

            // å°†æ—¥æœŸè®¾ç½®ä¸ºå½“å¤©çš„å¼€å§‹ï¼Œé¿å…æ—¶åŒºé—®é¢˜
            const [year, month, day] = dateString.split('-');
            targetDate = new Date(year, month - 1, day);
            
            // æ£€æŸ¥æ—¥æœŸæ˜¯å¦åˆæ³•
            if (isNaN(targetDate.getTime())) {
                errorMessageEl.textContent = 'æ—¥æœŸæ ¼å¼æ— æ•ˆï¼Œè¯·é‡æ–°é€‰æ‹©ã€‚';
                errorMessageEl.classList.remove('hidden');
                targetDate = null;
                return; // é€€å‡ºï¼Œä¸é‡ç½®
            }

            // å­˜å‚¨åˆ°localStorage
            localStorage.setItem(STORAGE_KEY, targetDate.toISOString());
            
            // æ›´æ–°æ˜¾ç¤º
            updateTargetDateDisplay();
            
            // é‡ç½®å€’è®¡æ—¶
            resetCountdown();
        }

        /**
         * âœ¨ ä¿®æ”¹ï¼šæ›´æ–°åº•éƒ¨ç›®æ ‡æ—¥æœŸçš„æ˜¾ç¤ºæ–‡å­—
         */
        function updateTargetDateDisplay() {
            if (targetDate) {
                // æ ¼å¼åŒ–æ—¥æœŸä¸º YYYYå¹´MMæœˆDDæ—¥
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                targetDateDisplay.textContent = `å½“å‰ç›®æ ‡æ—¥æœŸ: ${targetDate.toLocaleDateString('zh-CN', options)}`;
            } else {
                targetDateDisplay.textContent = 'å°šæœªè®¾ç½®ç›®æ ‡æ—¥æœŸ';
            }
        }

        /**
         * âœ¨ ä¿®æ”¹ï¼šé‡ç½®å€’è®¡æ—¶
         */
        function resetCountdown() {
            // æ¸…é™¤æ—§çš„è®¡æ—¶å™¨
            if (countdownInterval) {
                clearInterval(countdownInterval);
            }
            
            // éšè—å®Œæˆä¿¡æ¯ï¼Œæ˜¾ç¤ºå€’è®¡æ—¶å®¹å™¨
            messageEl.classList.add('hidden');
            countdownContainer.style.display = 'block';
            
            // æ˜¾ç¤ºåŠ è½½å™¨ï¼Œéšè—æ•°å­—
            loader.style.display = 'block';
            countdownContainer.classList.add('loading');
            document.querySelectorAll('.countdown-item').forEach(el => {
                el.style.visibility = 'hidden';
            });

            // ç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼Œç„¶åæ¯ç§’æ‰§è¡Œ
            if (targetDate) {
                showRandomQuote(); // âœ¨ ä¿®æ”¹ï¼šæ˜¾ç¤ºéšæœºé‡‘å¥
                dailyQuoteContainer.classList.remove('hidden'); // âœ¨ æ˜¾ç¤ºé‡‘å¥å®¹å™¨
                updateCountdown();
                countdownInterval = setInterval(updateCountdown, 1000);
            } else {
                // å¦‚æœæ²¡æœ‰ç›®æ ‡æ—¥æœŸï¼Œéšè—
                dailyQuoteContainer.classList.add('hidden'); // âœ¨ éšè—é‡‘å¥å®¹å™¨
                loader.style.display = 'none';
                countdownContainer.classList.remove('loading');
            }
        }

        /**
         * âœ¨ ä¿®æ”¹ï¼šé¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
         */
        function init() {
            // 1. æ·»åŠ æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            setDateButton.addEventListener('click', setAndSaveDate);
            
            // âœ¨ 2. æ·»åŠ é‡‘å¥å¡ç‰‡ç‚¹å‡»äº‹ä»¶
            dailyQuoteContainer.addEventListener('click', showRandomQuote);

            // 3. å°è¯•ä»localStorageåŠ è½½æ—¥æœŸ
            const savedDateString = localStorage.getItem(STORAGE_KEY);
            if (savedDateString) {
                targetDate = new Date(savedDateString);
                
                // âœ¨ æ–°å¢ï¼šéªŒè¯æœ¬åœ°å­˜å‚¨çš„æ—¥æœŸ
                if (isNaN(targetDate.getTime())) {
                    targetDate = null;
                    localStorage.removeItem(STORAGE_KEY); // æ¸…é™¤åæ•°æ®
                } else {
                    // å°†ä¿å­˜çš„æ—¥æœŸè®¾ç½®å›è¾“å…¥æ¡†
                    targetDateInput.value = targetDate.toISOString().split('T')[0];
                }
            }

            // 4. æ›´æ–°æ˜¾ç¤ºå¹¶å¯åŠ¨å€’è®¡æ—¶
            updateTargetDateDisplay();
            resetCountdown();
        }

        // --- âœ¨ æ˜¾ç¤ºæ¯æ—¥é‡‘å¥ åŠŸèƒ½é€»è¾‘ ---

        /**
         * âœ¨ ä¿®æ”¹ï¼šæ˜¾ç¤ºéšæœºé‡‘å¥
         * éšæœºä»é‡‘å¥åº“ä¸­é€‰æ‹©ä¸€å¥ï¼Œå¹¶é¿å…è¿ç»­é‡å¤
         */
        function showRandomQuote() {
            let newIndex = currentQuoteIndex;
            
            // ç¡®ä¿æ–°ç´¢å¼•ä¸æ—§ç´¢å¼•ä¸åŒ
            while (newIndex === currentQuoteIndex) {
                newIndex = Math.floor(Math.random() * morganHouselQuotes.length);
            }
            
            currentQuoteIndex = newIndex;
            const quote = morganHouselQuotes[currentQuoteIndex];
            
            // æ˜¾ç¤ºå†…å®¹
            dailyQuoteContent.textContent = `â€œ${quote}â€`;
        }

        // å¯åŠ¨åº”ç”¨
        init();
    </script>
</body>
</html>


